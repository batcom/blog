<!DOCTYPE HTML>
<html>
    <head>
        <!-- SyntaxHighlighter -->
        <script src="../../../public/sh/scripts/shCore.js"></script>
        <script src="../../../public/sh/scripts/shBrushAll.js"></script>
        <link type="text/css" rel="stylesheet" href="../../../public/sh/styles/shCore.css"/>
        <link type="text/css" rel="stylesheet" href="../../../public/sh/styles/shThemeMidnight.css"/>
        <script>
                SyntaxHighlighter.config.clipboardSwf = '../../../public/sh/scripts/clipboard.swf';
                    SyntaxHighlighter.all();
        </script>
                <!-- 第一行是引入核心文件 -->
                <!-- 第二行是引入语法高亮文件（可视需要书写多条，具体可查看 scripts 文件夹下的各个文件） -->
                <!-- 更多语法高亮请访问 https://github.com/ruchee/backup2/tree/master/scripts 获取 -->
                <!-- 第三行是引入基本 CSS 文件 -->
                <!-- 第四行是指定使用的颜色主题（更多主题可查看 styles 文件夹） -->
                <!-- ../../ 指代的是 HTML 代码根目录 -->
        <title> Memcached1.4.15的配置与安装 </title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="Stylesheet" type="text/css" href="../../../public/css/main.css" />
        <!-- blog ico -->
        <link type="image/x-icon" rel="icon" href="../../../public/images/ruchee.ico" />
        <link type="image/x-icon" rel="shortcut icon" href="../../../public/images/ruchee.ico" />
    </head>
    <body>
        <center style="font-family: 'Microsoft Yahei', sans-serif; font-size: 1.80em;
            font-weight: normal; color: #FF6600">Mdaxue-Wiki</center><br />
        <center>MdaxueWiki系统</center>


        
<h2 id="toc_0.1">Memcached1.4.15的配置与安装</h2>
<p>
因为memcached依赖与libevent，所以需要先安装依赖关系
</p>
<h3 id="toc_0.1.1">libevent的安装</h3>
<ol>
<li>
判断系统是否安装了libevent:
<pre class="brush :bash">
    rpm -qa | grep libevent
    ###一般默认都有安装，输出:libevent-1.4.13-4.el6.x86_64
    rpm -e --nodeps libevent-1.4.13-4.el6.x86_64 ##########（删除低版本，安装2.0.21）
</pre>

<li>
安装libevent
<pre class="brush :bash">
    tar xvzf libevent-2.0.21-stable.tar.gz
    cd libevent-2.0.21-stable
    ./configure  -prefix=/usr
    make &amp;&amp; make install
    ldconfig
    ls -a /usr/lib | grep libevent ####(测试是否安装上)
</pre>

</ol>
<hr />
<h3 id="toc_0.1.2">安装memcached</h3>
<pre class="brush :bash">
    tar xvzf memcached-1.4.5.tar.gz
    cd memcached-1.4.5
    ./configure -with-libevent=/usr     ###（默认安装/usr/local/bin/memcached）
    make &amp;&amp; make install
</pre>
<hr />
<h3 id="toc_0.1.3">memcached的启动和配置解析</h3>
<p>
安装完成后即可启动memcached，启动方式在<code>概览</code>里面有详细说明。这里也详细解释一下。
</p>
<ol>
<li>
启动方式: <code>/usr/local/bin/memcached -d -m 10 -u root -l 192.168.0.200 -p 12000 -c 256 -P /tmp/memcached.pid</code>

<li>
memcached参数的详细说明:

<ul>
<li>
-d选项是启动一个守护进程，

<li>
-u是运行Memcache的用户，我这里是root，

<li>
-m是分配给Memcache使用的内存数量，单位是MB，默认64MB, 我这里是10MB，

<li>
-l是监听的服务器IP地址，默认为所有网卡。 我这里指定了服务器的IP地址192.168.0.200

<li>
-p是设置Memcache监听的端口，我这里设置了12000，最好是1024以上的端口

<li>
-c选项是最大运行的并发连接数，默认是1024，我这里设置了256，按照你服务器的负载量来设定

<li>
-P是设置保存Memcache的pid文件，我这里是保存在 /tmp/memcached.pid

<li>
-p 使用的TCP端口。默认为11211

<li>
-m 最大内存大小。默认为64M

<li>
-vv 用very vrebose模式启动，调试信息和错误输出到控制台

<li>
-d 作为daemon在后台启动

</ul>
<li>
如果要结束Memcache进程，执行：kill #cat /tmp/memcached.pid# #换为反引号即数字键1左边的

</ol>
<p>
可以启动多个守护进程，不过端口不能重复，启动后要防火墙要开启对应端口，只允许内网信任机器访问。生产服务器上的memcached的部署情况可以参看概览。
<hr />
</p>



        <center  style="font-family: 'Microsoft Yahei'; font-size: small; font-weight: normal; color: #009933">
            Mdaxue&nbsp;&copy;&nbsp;2011-2013&nbsp;www.mdaxue.com<br/>
            Generated by Vim and Vimwiki
        </center>
    </body>
</html>
