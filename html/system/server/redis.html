<!DOCTYPE HTML>
<html>
    <head>
        <!-- SyntaxHighlighter -->
        <script src="../../../public/sh/scripts/shCore.js"></script>
        <script src="../../../public/sh/scripts/shBrushAll.js"></script>
        <link type="text/css" rel="stylesheet" href="../../../public/sh/styles/shCore.css"/>
        <link type="text/css" rel="stylesheet" href="../../../public/sh/styles/shThemeMidnight.css"/>
        <script>
                SyntaxHighlighter.config.clipboardSwf = '../../../public/sh/scripts/clipboard.swf';
                    SyntaxHighlighter.all();
        </script>
                <!-- 第一行是引入核心文件 -->
                <!-- 第二行是引入语法高亮文件（可视需要书写多条，具体可查看 scripts 文件夹下的各个文件） -->
                <!-- 更多语法高亮请访问 https://github.com/ruchee/backup2/tree/master/scripts 获取 -->
                <!-- 第三行是引入基本 CSS 文件 -->
                <!-- 第四行是指定使用的颜色主题（更多主题可查看 styles 文件夹） -->
                <!-- ../../ 指代的是 HTML 代码根目录 -->
        <title>Redis2.6.13的配置与安装</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="Stylesheet" type="text/css" href="../../../public/css/main.css" />
        <!-- blog ico -->
        <link type="image/x-icon" rel="icon" href="../../../public/images/ruchee.ico" />
        <link type="image/x-icon" rel="shortcut icon" href="../../../public/images/ruchee.ico" />
    </head>
    <body>
        <center style="font-family: 'Microsoft Yahei', sans-serif; font-size: 1.80em;
            font-weight: normal; color: #FF6600">Mdaxue-Wiki</center><br />
        <center>MdaxueWiki系统</center>


        
<h2 id="toc_0.1">Redis2.6.13的配置与安装</h2>
<h3 id="toc_0.1.1">Redis的编译安装</h3>
<p>
安装很简单，直接上代码
</p>
<pre class="brush :bash">
tar -zxvf redis-stable.tar.gz
cd redis-stable
make &amp;&amp; make test &amp;&amp; make install
</pre>
<hr />
<h3 id="toc_0.1.2">设置开机启动</h3>
<pre class="brush :bash">
#!/bin/sh
#
# redis        Startup script for Redis Server
#
# chkconfig: - 90 10
# description: Redis is an open source, advanced key-value store. 
#
# processname: redis-server
# config: /etc/redis.conf
# pidfile: /var/run/redis.pid

REDISPORT=6379
EXEC=/usr/local/bin/redis-server
REDIS_CLI=/usr/local/bin/redis-cli
 
PIDFILE=/var/run/redis.pid
CONF="/etc/redis.conf"
 
case "$1" in
    start)
        if [ -f $PIDFILE ]
        then
                echo "$PIDFILE exists, process is already running or crashed"
        else
                echo "Starting Redis server..."
                $EXEC $CONF
        fi
        if [ "$?"="0" ] 
        then 
              echo "Redis is running..."
        fi 
        ;;
    stop)
        if [ ! -f $PIDFILE ]
        then
                echo "$PIDFILE does not exist, process is not running"
        else
                PID=$(cat $PIDFILE)
                echo "Stopping ..."
                $REDIS_CLI -p $REDISPORT SHUTDOWN
                while [ -x ${PIDFILE} ]
               do
                    echo "Waiting for Redis to shutdown ..."
                    sleep 1
                done
                echo "Redis stopped"
        fi
        ;;
   restart|force-reload)
        ${0} stop
        ${0} start
        ;;
  *)
    echo "Usage: /etc/init.d/redis {start|stop|restart|force-reload}" &gt;&amp;2
        exit 1
esac
</pre>
<hr />
<p>
把上述代码存为<code>redis</code>,放到<code>/etc/init.d/</code>下面的redis,<code>chmod +x ／etc/init.d/redis</code>
其实做成服务启动，也是调用redis-server，如果想让它在后台作为<code>daemon</code>运行，那么需要修改<code>redis.conf</code>,将 <code>daemonize no</code> 改为 <code>daemonize yes</code>
<code>chkconfig --add redis</code>
<code>chkconfig redis on</code>
启动：
<code>service redis start</code>   或者 <code>/etc/init.d/redis start</code>
停止：
<code>service redis stop</code>   或者 <code>/etc/init.d/redis stop</code>
<hr />
</p>
<h3 id="toc_0.1.3">Redis配置文件详解</h3>
<p>
因为生产服务器上面没有怎么运用Redis的高级功能，如负载均衡等，所以并不需要怎么复杂的配置，生产服务器上面也只是更改了一下上面提到的以后台来运行服务。如果后期架构需要，可以将生产上的配置详解增加到这里来，和生产上同步讲解.而此时写文档时，没作什么特殊说明，所以就不提配置文件的具体配置和解释了。
<hr />
</p>



        <center  style="font-family: 'Microsoft Yahei'; font-size: small; font-weight: normal; color: #009933">
            Mdaxue&nbsp;&copy;&nbsp;2011-2013&nbsp;www.mdaxue.com<br/>
            Generated by Vim and Vimwiki
        </center>
    </body>
</html>
